<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom 100ms UI</title>
    <style>
      .hms-ui-c-PJLV-ihxuvAi-css {
        display: none !important;
      }
      #videoPart {
        height: 100vh;
      }
    </style>
</head>
<body>
    <div id="videoPart"></div>

    <!-- React and jQuery CDNs -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@100mslive/roomkit-react@latest"></script>

    <script>
      function getQueryparams(search) {
        const sPageURL = decodeURIComponent(window.location.search.substring(1));
        const sURLVariables = sPageURL.split('&');
        let sParameterName;
        let i;
        for (i = 0; i < sURLVariables.length; i += 1) {
          sParameterName = sURLVariables[i].split('=');
          if (sParameterName[0] === search) {
            return sParameterName[1] === undefined ? true : sParameterName[1];
          }
        }
        return false;
      }

      function attachClickHandler() {
        // Remove header and toolbar
        $('[data-testid="header"], [data-testid="footer"], [data-testid="participant_video_tile"], [data-testid="control_bar"]').remove();

        // Remove chat, participant list, settings, and other panels
        $('[data-testid="chat"], [data-testid="participants_list"], [data-testid="settings"]').remove();

        // Remove extra overlays
        $('[data-testid="preview_screen"], [data-testid="leave_modal"], [data-testid="end_stream_modal"]').remove();

        // Keep only participant tiles and screenshare
        $('[data-testid="participant_tile"], [data-testid="screenshare_tile"]').show();
      }

      // Initial call to attach the click handler
      attachClickHandler();

      // Observe changes to the DOM
      const observer = new MutationObserver(attachClickHandler);
      observer.observe(document.body, {
        childList: true,
        subtree: true,
      });

      $(document).ready(() => {
        console.log('=======================i');
        const options = {
          userName: 'beam',
          userId: 'hash',
        };
        const codee = 'mjw-fwqq-vnf';
        const HMSPrebuilt = window["@100mslive/roomkit-react"].HMSPrebuilt;

        ReactDOM.createRoot(document.getElementById('videoPart')).render(
          React.createElement(React.StrictMode, null,
            React.createElement(HMSPrebuilt, { roomCode: codee, options: options })
          )
        );
      });
    </script>
</body>
</html>
